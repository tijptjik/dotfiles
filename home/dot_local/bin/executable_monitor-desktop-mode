#!/usr/bin/env fish

# Switch to Desktop monitor profile

# Set monitors for desktop use
# DP-1: Main ultrawide
# DP-2: Side monitor
# HDMI-A-1: TV (disabled)
hyprctl reload

# Restore default hypridle configuration by removing any overrides
set override_dir (path resolve ~/.config/systemd/user/hypridle.service.d)
if test -d $override_dir
    rm -rf $override_dir
    systemctl --user daemon-reload
end

# Kill the game-mode activity listener
/bin/pkill -f game-mode-listener || true

# Stop the game-mode timer
systemctl --user stop dim-screen.timer

# Ensure screen is back to full brightness
hyprsunset --gamma 1.0

# Restart the default idle service
systemctl --user start hypridle.service

notify-send "[DISPLAY] Desktop profile"
