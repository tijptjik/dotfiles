#!/usr/bin/env fish

# Switch to Desktop monitor profile

# Set monitors for desktop use
# DP-1: Main ultrawide
# DP-2: Side monitor
# HDMI-A-1: TV (disabled)
hyprctl --batch "\
    keyword monitor DP-1,3440x1440@119.960999,0x0,auto,vrr,1;\
    keyword monitor DP-2,1920x1080@74.97,3440x720,auto,vrr,1;\
    keyword monitor HDMI-A-1,disable"

# Restore default hypridle configuration by removing any overrides
set override_dir (path resolve ~/.config/systemd/user/hypridle.service.d)
if test -d $override_dir
    rm -rf $override_dir
end

# Kill the game-mode activity listener
/bin/pkill -f game-mode-listener || true

# Stop the game-mode timer
systemctl --user stop dim-screen.timer

# Ensure screen is back to full brightness
hyprsunset --gamma 1.0

# Restart the default idle service
systemctl --user start hypridle.service

echo "Switched to Desktop monitor profile."
